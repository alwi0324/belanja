<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Tagging Lokasi Otomatis</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input { padding: 8px; width: 250px; border: 1px solid #ccc; border-radius: 4px; }
        button { padding: 10px 15px; background-color: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background-color: #218838; }
        #status { font-size: 0.9em; color: #666; margin-top: 10px; }
    </style>
</head>
<body>

    <h2>Tagging Lokasi</h2>

    <div class="form-group">
        <label for="lat">Latitude (Lintang):</label>
        <input type="text" id="lat" placeholder="Menunggu data..." readonly>
    </div>

    <div class="form-group">
        <label for="long">Longitude (Bujur):</label>
        <input type="text" id="long" placeholder="Menunggu data..." readonly>
    </div>

    <button onclick="getLocation()">Ambil Lokasi Saat Ini</button>
    
    <p id="status"></p>

    <script>
        const statusDisplay = document.getElementById('status');
        const latInput = document.getElementById('lat');
        const longInput = document.getElementById('long');

        function getLocation() {
            // Cek apakah browser mendukung Geolocation
            if (navigator.geolocation) {
                statusDisplay.innerHTML = "Sedang mencari koordinat...";
                
                // Mengambil posisi saat ini
                navigator.geolocation.getCurrentPosition(showPosition, showError, {
                    enableHighAccuracy: true, // Menggunakan GPS jika tersedia untuk akurasi tinggi
                    timeout: 5000,           // Batas waktu pencarian 5 detik
                    maximumAge: 0            // Selalu ambil data terbaru
                });
            } else {
                statusDisplay.innerHTML = "Maaf, browser Anda tidak mendukung Geolocation.";
            }
        }

        function showPosition(position) {
            // Isi input field dengan hasil koordinat
            latInput.value = position.coords.latitude;
            longInput.value = position.coords.longitude;
            
            statusDisplay.innerHTML = "Lokasi berhasil diperbarui!";
            statusDisplay.style.color = "green";
        }

        function showError(error) {
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    statusDisplay.innerHTML = "User menolak permintaan lokasi.";
                    break;
                case error.POSITION_UNAVAILABLE:
                    statusDisplay.innerHTML = "Informasi lokasi tidak tersedia.";
                    break;
                case error.TIMEOUT:
                    statusDisplay.innerHTML = "Waktu permintaan habis.";
                    break;
                case error.UNKNOWN_ERROR:
                    statusDisplay.innerHTML = "Terjadi kesalahan yang tidak diketahui.";
                    break;
            }
            statusDisplay.style.color = "red";
        }
    </script>

</body>
</html>
